name: Build and deploy

on:
  push:
  pull_request:
  workflow_dispatch:

defaults:
  run:
    shell: bash

jobs:
  build_test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Build code
        run: echo "Build code"

      - name: Run tests
        run: "echo Run unit tests"

  deploy_sandbox:
    needs: build_test
    if: github.event_name == 'pull_request'
    environment:
      name: sandbox
      url: https://tiagoboeing.com
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: echo "Running deploy script..."

  deploy_dev:
    needs: build_test
    environment:
      name: dev
      url: https://tiagoboeing.com
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: echo "Running deploy script..."

  deploy_hlg:
    needs: deploy_dev
    environment:
      name: hlg
      url: https://tiagoboeing.com
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: echo "Running deploy script..."

  deploy_prd:
    needs: deploy_hlg
    environment:
      name: prod
      url: https://tiagoboeing.com
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: echo "Running deploy script..."

  deploy_stg:
    needs: deploy_hlg
    concurrency: deploy_prd
    environment:
      name: stg
      url: https://tiagoboeing.com
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - run: echo "Running deploy script..."
